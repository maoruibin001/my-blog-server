# go语言并发多文件查找重复行 

前言：很久没写手记，不是不想写，而是不知道写什么。虽然这段时间进步很快，也学到了很多东西，但是一下笔就发现将要分享的内容没有什么新意，完全是炒冷饭，也就放弃了。不过太久没写，总觉得生活中缺少了一些东西，会有种学了一堆没用知识的错觉，因此偶尔分享下，也算对自己学习的鞭策。



今天分享的内容是go语言并发操作文件的代码。经过这段时间的学习，个人觉得go语言优雅轻量，有很多思想和设计是javascript中所欠缺的。底层设计特别是并发机制基本上是javascript完全缺乏的，因此本篇分享这个内容，以下是正文：



这个版本看上去很清晰，代码也比较简单，但是这是一个有问题的代码，问题就出在go语言是并发变成的语言，可能会报错go fatal error: concurrent map writes（同时写或者读的时候在写）。如何处理呢？两种方式，一种是采用go语言锁，sync.mutex。一种是采用通道，串行写入。这里我采用锁的方式，将读和写都锁定，这样就避免了并发导致的读写冲突问题，代码如下：

代码并不复杂，有些稍微需要描述的地方都有代码注释。另外最后推荐两本go语言书籍，特别值得一看：《go并发编程实战第二版》《go程序设计语言》

thx~

