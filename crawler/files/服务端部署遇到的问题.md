# 服务端部署遇到的问题 

## 监控80端口问题

1、刚部署时，采用的node起的服务器，监控80端口无效，采用的方式是：

```javascriptsudo iptables -t nat -A PREROUTING -p tcp --dport 80 -j REDIRECT --to-ports 8080
```

2、之后发现node转发实在有点蛋疼，不够简洁，然后迁到了nginx。此时要去除转发

```javascriptsudo iptables -t nat -D PREROUTING 1
```

也可以用下面命令查看网卡转发情况

```javascriptsudo iptables  -t  nat  -nL
```

## nginx 安装遇到的问题

在ubuntu上通过多种方式安装nginx都不成功
使用了brew、apt-get都不行，最后通过上传文件的方式安装成功，但是也出现了比较多的问题，例如运行./configular时可以成功，但是make总是出错，或者makefile总是出错，一步步根据网上的问题来处理了。主要是要配置好./configular后面的参数。

nginx跑起来之后不能也出现各种问题。nginx使用的配置居然不是你自己定义的位置，也不是当前目录下的conf/nginx.conf这个文件。而是有默认地址/etc/nginx/nginx.conf，并且不能修改。默认这个文件又是只读的，还用通过chmod修改文件权限之后才能修改。

## nginx 转发patch问题

成功跑起来之后，发现所有patch请求都失败了，网上查了各种方法试了都没用。最后采用的方式是，将所有patch请求转为put请求。

